"use strict";(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[682],{3175:(ct,Z,h)=>{h.d(Z,{a:()=>E});var y=h(2340),p=h(4004),f=h(262),t=h(2843),M=h(5e3),x=h(520),O=h(263);let E=(()=>{class b{constructor(d,m){this.http=d,this.authService=m,this.url=`${y.N.url_api}/chat`}getAllChats(){return this.http.get(this.url).pipe((0,p.U)(d=>(d=this.cleanChats(d),this.sortChats(d))),(0,f.K)(d=>this.handleError(d)))}getChatId(d){return this.http.post(`${this.url}/getChatId`,{to:d}).pipe((0,f.K)(m=>this.handleError(m)))}getChatInfo(d){return this.http.get(`${this.url}/${d}`).pipe((0,f.K)(m=>this.handleError(m)))}blockChat(d){return this.http.get(`${this.url}/block/${d}`).pipe((0,f.K)(m=>this.handleError(m)))}unlockChat(d){return this.http.get(`${this.url}/unlock/${d}`).pipe((0,f.K)(m=>this.handleError(m)))}getFromUser(d){return this.http.get(`${this.url}/getFromUser/${d}`).pipe((0,f.K)(m=>this.handleError(m)))}handleError(d){return 401===d.status?(this.authService.logout(),(0,t._)("Unauthorized")):(0,t._)("Error unexpected")}sortChats(d){return d.sort((m,_)=>m.lastMessage?_.lastMessage?m.lastMessage.updatedAt>_.lastMessage.updatedAt?-1:1:m.lastMessage.updatedAt>_.createdAt?-1:1:_.lastMessage?m.updatedAt>_.lastMessage.updatedAt?-1:1:m.updatedAt>_.createdAt?-1:1),d}cleanChats(d){const m=this.authService.getMyUser();return d.filter(R=>R.lastMessage||R.users[0]._id==m._id)}}return b.\u0275fac=function(d){return new(d||b)(M.LFG(x.eN),M.LFG(O.e))},b.\u0275prov=M.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})()},273:(ct,Z,h)=>{h.d(Z,{$:()=>ie});var y={};h.r(y),h.d(y,{Decoder:()=>rt,Encoder:()=>Xt,PacketType:()=>g,protocol:()=>Mt});var p={};h.r(p),h.d(p,{Manager:()=>tt,Socket:()=>at,connect:()=>U,default:()=>U,io:()=>U,protocol:()=>Mt});var f=h(5e3),t=h(8306),M=h(3099);const x=Object.create(null);x.open="0",x.close="1",x.ping="2",x.pong="3",x.message="4",x.upgrade="5",x.noop="6";const O=Object.create(null);Object.keys(x).forEach(o=>{O[x[o]]=o});const E={type:"error",data:"parser error"},b="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),A="function"==typeof ArrayBuffer,_=(o,n)=>{const i=new FileReader;return i.onload=function(){const e=i.result.split(",")[1];n("b"+e)},i.readAsDataURL(o)},R=({type:o,data:n},i,e)=>b&&n instanceof Blob?i?e(n):_(n,e):A&&(n instanceof ArrayBuffer||(o=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o&&o.buffer instanceof ArrayBuffer)(n))?i?e(n):_(new Blob([n]),e):e(x[o]+(n||"")),P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",I="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let o=0;o<P.length;o++)I[P.charCodeAt(o)]=o;const Tt="function"==typeof ArrayBuffer,F=(o,n)=>{if(Tt){const i=(o=>{let e,s,a,c,l,n=.75*o.length,i=o.length,r=0;"="===o[o.length-1]&&(n--,"="===o[o.length-2]&&n--);const u=new ArrayBuffer(n),v=new Uint8Array(u);for(e=0;e<i;e+=4)s=I[o.charCodeAt(e)],a=I[o.charCodeAt(e+1)],c=I[o.charCodeAt(e+2)],l=I[o.charCodeAt(e+3)],v[r++]=s<<2|a>>4,v[r++]=(15&a)<<4|c>>2,v[r++]=(3&c)<<6|63&l;return u})(o);return D(i,n)}return{base64:!0,data:o}},D=(o,n)=>"blob"===n&&o instanceof ArrayBuffer?new Blob([o]):o,lt=(o,n)=>{if("string"!=typeof o)return{type:"message",data:D(o,n)};const i=o.charAt(0);return"b"===i?{type:"message",data:F(o.substring(1),n)}:O[i]?o.length>1?{type:O[i],data:o.substring(1)}:{type:O[i]}:E},H=String.fromCharCode(30);function C(o){if(o)return function re(o){for(var n in C.prototype)o[n]=C.prototype[n];return o}(o)}C.prototype.on=C.prototype.addEventListener=function(o,n){return this._callbacks=this._callbacks||{},(this._callbacks["$"+o]=this._callbacks["$"+o]||[]).push(n),this},C.prototype.once=function(o,n){function i(){this.off(o,i),n.apply(this,arguments)}return i.fn=n,this.on(o,i),this},C.prototype.off=C.prototype.removeListener=C.prototype.removeAllListeners=C.prototype.removeEventListener=function(o,n){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks["$"+o];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+o],this;for(var e,r=0;r<i.length;r++)if((e=i[r])===n||e.fn===n){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+o],this},C.prototype.emitReserved=C.prototype.emit=function(o){this._callbacks=this._callbacks||{};for(var n=new Array(arguments.length-1),i=this._callbacks["$"+o],e=1;e<arguments.length;e++)n[e-1]=arguments[e];if(i){e=0;for(var r=(i=i.slice(0)).length;e<r;++e)i[e].apply(this,n)}return this},C.prototype.listeners=function(o){return this._callbacks=this._callbacks||{},this._callbacks["$"+o]||[]},C.prototype.hasListeners=function(o){return!!this.listeners(o).length};const S="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Q(o,...n){return n.reduce((i,e)=>(o.hasOwnProperty(e)&&(i[e]=o[e]),i),{})}const z=setTimeout,At=clearTimeout;function G(o,n){n.useNativeTimers?(o.setTimeoutFn=z.bind(S),o.clearTimeoutFn=At.bind(S)):(o.setTimeoutFn=setTimeout.bind(S),o.clearTimeoutFn=clearTimeout.bind(S))}function Zt(o){return"string"==typeof o?function Et(o){let n=0,i=0;for(let e=0,r=o.length;e<r;e++)n=o.charCodeAt(e),n<128?i+=1:n<2048?i+=2:n<55296||n>=57344?i+=3:(e++,i+=4);return i}(o):Math.ceil(1.33*(o.byteLength||o.size))}class It extends Error{constructor(n,i,e){super(n),this.description=i,this.context=e,this.type="TransportError"}}class ht extends C{constructor(n){super(),this.writable=!1,G(this,n),this.opts=n,this.query=n.query,this.readyState="",this.socket=n.socket}onError(n,i,e){return super.emitReserved("error",new It(n,i,e)),this}open(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(n){"open"===this.readyState&&this.write(n)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(n){const i=lt(n,this.socket.binaryType);this.onPacket(i)}onPacket(n){super.emitReserved("packet",n)}onClose(n){this.readyState="closed",super.emitReserved("close",n)}}const ut="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),pt={};let gt,dt=0,k=0;function ft(o){let n="";do{n=ut[o%64]+n,o=Math.floor(o/64)}while(o>0);return n}function mt(){const o=ft(+new Date);return o!==gt?(dt=0,gt=o):o+"."+ft(dt++)}for(;k<64;k++)pt[ut[k]]=k;function _t(o){let n="";for(let i in o)o.hasOwnProperty(i)&&(n.length&&(n+="&"),n+=encodeURIComponent(i)+"="+encodeURIComponent(o[i]));return n}let Ct=!1;try{Ct="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(o){}const Nt=Ct;function vt(o){const n=o.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!n||Nt))return new XMLHttpRequest}catch(i){}if(!n)try{return new(S[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(i){}}function Rt(){}const qt=null!=new vt({xdomain:!1}).responseType;let V=(()=>{class o extends C{constructor(i,e){super(),G(this,e),this.opts=e,this.method=e.method||"GET",this.uri=i,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const i=Q(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this.opts.xd,i.xscheme=!!this.opts.xs;const e=this.xhr=new vt(i);try{e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let r in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(r)&&e.setRequestHeader(r,this.opts.extraHeaders[r])}}catch(r){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(r){}try{e.setRequestHeader("Accept","*/*")}catch(r){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof e.status?e.status:0)},0))},e.send(this.data)}catch(r){return void this.setTimeoutFn(()=>{this.onError(r)},0)}"undefined"!=typeof document&&(this.index=o.requestsCount++,o.requests[this.index]=this)}onError(i){this.emitReserved("error",i,this.xhr),this.cleanup(!0)}cleanup(i){if(null!=this.xhr){if(this.xhr.onreadystatechange=Rt,i)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete o.requests[this.index],this.xhr=null}}onLoad(){const i=this.xhr.responseText;null!==i&&(this.emitReserved("data",i),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}return o.requestsCount=0,o.requests={},o})();function yt(){for(let o in V.requests)V.requests.hasOwnProperty(o)&&V.requests[o].abort()}"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",yt):"function"==typeof addEventListener&&addEventListener("onpagehide"in S?"pagehide":"unload",yt,!1));const Jt="function"==typeof Promise&&"function"==typeof Promise.resolve?n=>Promise.resolve().then(n):(n,i)=>i(n,0),W=S.WebSocket||S.MozWebSocket,xt="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Yt={websocket:class Ft extends ht{constructor(n){super(n),this.supportsBinary=!n.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const n=this.uri(),i=this.opts.protocols,e=xt?{}:Q(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(e.headers=this.opts.extraHeaders);try{this.ws=xt?new W(n,i,e):i?new W(n,i):new W(n)}catch(r){return this.emitReserved("error",r)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=n=>this.onClose({description:"websocket connection closed",context:n}),this.ws.onmessage=n=>this.onData(n.data),this.ws.onerror=n=>this.onError("websocket error",n)}write(n){this.writable=!1;for(let i=0;i<n.length;i++){const r=i===n.length-1;R(n[i],this.supportsBinary,s=>{try{this.ws.send(s)}catch(c){}r&&Jt(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let n=this.query||{};const i=this.opts.secure?"wss":"ws";let e="";this.opts.port&&("wss"===i&&443!==Number(this.opts.port)||"ws"===i&&80!==Number(this.opts.port))&&(e=":"+this.opts.port),this.opts.timestampRequests&&(n[this.opts.timestampParam]=mt()),this.supportsBinary||(n.b64=1);const r=_t(n);return i+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+e+this.opts.path+(r.length?"?"+r:"")}check(){return!!W}},polling:class Lt extends ht{constructor(n){if(super(n),this.polling=!1,"undefined"!=typeof location){const e="https:"===location.protocol;let r=location.port;r||(r=e?"443":"80"),this.xd="undefined"!=typeof location&&n.hostname!==location.hostname||r!==n.port,this.xs=n.secure!==e}this.supportsBinary=qt&&!(n&&n.forceBase64)}get name(){return"polling"}doOpen(){this.poll()}pause(n){this.readyState="pausing";const i=()=>{this.readyState="paused",n()};if(this.polling||!this.writable){let e=0;this.polling&&(e++,this.once("pollComplete",function(){--e||i()})),this.writable||(e++,this.once("drain",function(){--e||i()}))}else i()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(n){((o,n)=>{const i=o.split(H),e=[];for(let r=0;r<i.length;r++){const s=lt(i[r],n);if(e.push(s),"error"===s.type)break}return e})(n,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){const n=()=>{this.write([{type:"close"}])};"open"===this.readyState?n():this.once("open",n)}write(n){this.writable=!1,((o,n)=>{const i=o.length,e=new Array(i);let r=0;o.forEach((s,a)=>{R(s,!1,c=>{e[a]=c,++r===i&&n(e.join(H))})})})(n,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let n=this.query||{};const i=this.opts.secure?"https":"http";let e="";!1!==this.opts.timestampRequests&&(n[this.opts.timestampParam]=mt()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.opts.port&&("https"===i&&443!==Number(this.opts.port)||"http"===i&&80!==Number(this.opts.port))&&(e=":"+this.opts.port);const r=_t(n);return i+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+e+this.opts.path+(r.length?"?"+r:"")}request(n={}){return Object.assign(n,{xd:this.xd,xs:this.xs},this.opts),new V(this.uri(),n)}doWrite(n,i){const e=this.request({method:"POST",data:n});e.on("success",i),e.on("error",(r,s)=>{this.onError("xhr post error",r,s)})}doPoll(){const n=this.request();n.on("data",this.onData.bind(this)),n.on("error",(i,e)=>{this.onError("xhr poll error",i,e)}),this.pollXhr=n}}},Dt=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ht=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function L(o){const n=o,i=o.indexOf("["),e=o.indexOf("]");-1!=i&&-1!=e&&(o=o.substring(0,i)+o.substring(i,e).replace(/:/g,";")+o.substring(e,o.length));let r=Dt.exec(o||""),s={},a=14;for(;a--;)s[Ht[a]]=r[a]||"";return-1!=i&&-1!=e&&(s.source=n,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function j(o,n){const e=n.replace(/\/{2,9}/g,"/").split("/");return("/"==n.substr(0,1)||0===n.length)&&e.splice(0,1),"/"==n.substr(n.length-1,1)&&e.splice(e.length-1,1),e}(0,s.path),s.queryKey=function Kt(o,n){const i={};return n.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,r,s){r&&(i[r]=s)}),i}(0,s.query),s}let bt=(()=>{class o extends C{constructor(i,e={}){super(),i&&"object"==typeof i&&(e=i,i=null),i?(i=L(i),e.hostname=i.host,e.secure="https"===i.protocol||"wss"===i.protocol,e.port=i.port,i.query&&(e.query=i.query)):e.host&&(e.hostname=L(e.host).host),G(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function Ut(o){let n={},i=o.split("&");for(let e=0,r=i.length;e<r;e++){let s=i[e].split("=");n[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return n}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(i){const e=Object.assign({},this.opts.query);e.EIO=4,e.transport=i,this.id&&(e.sid=this.id);const r=Object.assign({},this.opts.transportOptions[i],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Yt[i](r)}open(){let i;if(this.opts.rememberUpgrade&&o.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))i="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);i=this.transports[0]}this.readyState="opening";try{i=this.createTransport(i)}catch(e){return this.transports.shift(),void this.open()}i.open(),this.setTransport(i)}setTransport(i){this.transport&&this.transport.removeAllListeners(),this.transport=i,i.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(i){let e=this.createTransport(i),r=!1;o.priorWebsocketSuccess=!1;const s=()=>{r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",B=>{if(!r)if("pong"===B.type&&"probe"===B.data){if(this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;o.priorWebsocketSuccess="websocket"===e.name,this.transport.pause(()=>{r||"closed"!==this.readyState&&(T(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())})}else{const N=new Error("probe error");N.transport=e.name,this.emitReserved("upgradeError",N)}}))};function a(){r||(r=!0,T(),e.close(),e=null)}const c=B=>{const N=new Error("probe error: "+B);N.transport=e.name,a(),this.emitReserved("upgradeError",N)};function l(){c("transport closed")}function u(){c("socket closed")}function v(B){e&&B.name!==e.name&&a()}const T=()=>{e.removeListener("open",s),e.removeListener("error",c),e.removeListener("close",l),this.off("close",u),this.off("upgrading",v)};e.once("open",s),e.once("error",c),e.once("close",l),this.once("close",u),this.once("upgrading",v),e.open()}onOpen(){if(this.readyState="open",o.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let i=0;const e=this.upgrades.length;for(;i<e;i++)this.probe(this.upgrades[i])}}onPacket(i){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",i),this.emitReserved("heartbeat"),i.type){case"open":this.onHandshake(JSON.parse(i.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=i.data,this.onError(e);break;case"message":this.emitReserved("data",i.data),this.emitReserved("message",i.data)}}onHandshake(i){this.emitReserved("handshake",i),this.id=i.sid,this.transport.query.sid=i.sid,this.upgrades=this.filterUpgrades(i.upgrades),this.pingInterval=i.pingInterval,this.pingTimeout=i.pingTimeout,this.maxPayload=i.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const i=this.getWritablePackets();this.transport.send(i),this.prevBufferLen=i.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(e+=Zt(s)),r>0&&e>this.maxPayload)return this.writeBuffer.slice(0,r);e+=2}return this.writeBuffer}write(i,e,r){return this.sendPacket("message",i,e,r),this}send(i,e,r){return this.sendPacket("message",i,e,r),this}sendPacket(i,e,r,s){if("function"==typeof e&&(s=e,e=void 0),"function"==typeof r&&(s=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;const a={type:i,data:e,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),s&&this.once("flush",s),this.flush()}close(){const i=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),i()},r=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():i()}):this.upgrading?r():i()),this}onError(i){o.priorWebsocketSuccess=!1,this.emitReserved("error",i),this.onClose("transport error",i)}onClose(i,e){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",i,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(i){const e=[];let r=0;const s=i.length;for(;r<s;r++)~this.transports.indexOf(i[r])&&e.push(i[r]);return e}}return o.protocol=4,o})();const zt="function"==typeof ArrayBuffer,Ot=Object.prototype.toString,$t="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Ot.call(Blob),Vt="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===Ot.call(File);function st(o){return zt&&(o instanceof ArrayBuffer||(o=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(o):o.buffer instanceof ArrayBuffer)(o))||$t&&o instanceof Blob||Vt&&o instanceof File}function X(o,n){if(!o||"object"!=typeof o)return!1;if(Array.isArray(o)){for(let i=0,e=o.length;i<e;i++)if(X(o[i]))return!0;return!1}if(st(o))return!0;if(o.toJSON&&"function"==typeof o.toJSON&&1===arguments.length)return X(o.toJSON(),!0);for(const i in o)if(Object.prototype.hasOwnProperty.call(o,i)&&X(o[i]))return!0;return!1}function Wt(o){const n=[],e=o;return e.data=it(o.data,n),e.attachments=n.length,{packet:e,buffers:n}}function it(o,n){if(!o)return o;if(st(o)){const i={_placeholder:!0,num:n.length};return n.push(o),i}if(Array.isArray(o)){const i=new Array(o.length);for(let e=0;e<o.length;e++)i[e]=it(o[e],n);return i}if("object"==typeof o&&!(o instanceof Date)){const i={};for(const e in o)Object.prototype.hasOwnProperty.call(o,e)&&(i[e]=it(o[e],n));return i}return o}function jt(o,n){return o.data=ot(o.data,n),o.attachments=void 0,o}function ot(o,n){if(!o)return o;if(o&&!0===o._placeholder){if("number"==typeof o.num&&o.num>=0&&o.num<n.length)return n[o.num];throw new Error("illegal attachments")}if(Array.isArray(o))for(let i=0;i<o.length;i++)o[i]=ot(o[i],n);else if("object"==typeof o)for(const i in o)Object.prototype.hasOwnProperty.call(o,i)&&(o[i]=ot(o[i],n));return o}const Mt=5;var g=(()=>{return(o=g||(g={}))[o.CONNECT=0]="CONNECT",o[o.DISCONNECT=1]="DISCONNECT",o[o.EVENT=2]="EVENT",o[o.ACK=3]="ACK",o[o.CONNECT_ERROR=4]="CONNECT_ERROR",o[o.BINARY_EVENT=5]="BINARY_EVENT",o[o.BINARY_ACK=6]="BINARY_ACK",g;var o})();class Xt{constructor(n){this.replacer=n}encode(n){return n.type!==g.EVENT&&n.type!==g.ACK||!X(n)?[this.encodeAsString(n)]:(n.type=n.type===g.EVENT?g.BINARY_EVENT:g.BINARY_ACK,this.encodeAsBinary(n))}encodeAsString(n){let i=""+n.type;return(n.type===g.BINARY_EVENT||n.type===g.BINARY_ACK)&&(i+=n.attachments+"-"),n.nsp&&"/"!==n.nsp&&(i+=n.nsp+","),null!=n.id&&(i+=n.id),null!=n.data&&(i+=JSON.stringify(n.data,this.replacer)),i}encodeAsBinary(n){const i=Wt(n),e=this.encodeAsString(i.packet),r=i.buffers;return r.unshift(e),r}}class rt extends C{constructor(n){super(),this.reviver=n}add(n){let i;if("string"==typeof n){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(n),i.type===g.BINARY_EVENT||i.type===g.BINARY_ACK?(this.reconstructor=new te(i),0===i.attachments&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else{if(!st(n)&&!n.base64)throw new Error("Unknown type: "+n);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");i=this.reconstructor.takeBinaryData(n),i&&(this.reconstructor=null,super.emitReserved("decoded",i))}}decodeString(n){let i=0;const e={type:Number(n.charAt(0))};if(void 0===g[e.type])throw new Error("unknown packet type "+e.type);if(e.type===g.BINARY_EVENT||e.type===g.BINARY_ACK){const s=i+1;for(;"-"!==n.charAt(++i)&&i!=n.length;);const a=n.substring(s,i);if(a!=Number(a)||"-"!==n.charAt(i))throw new Error("Illegal attachments");e.attachments=Number(a)}if("/"===n.charAt(i+1)){const s=i+1;for(;++i&&","!==n.charAt(i)&&i!==n.length;);e.nsp=n.substring(s,i)}else e.nsp="/";const r=n.charAt(i+1);if(""!==r&&Number(r)==r){const s=i+1;for(;++i;){const a=n.charAt(i);if(null==a||Number(a)!=a){--i;break}if(i===n.length)break}e.id=Number(n.substring(s,i+1))}if(n.charAt(++i)){const s=this.tryParse(n.substr(i));if(!rt.isPayloadValid(e.type,s))throw new Error("invalid payload");e.data=s}return e}tryParse(n){try{return JSON.parse(n,this.reviver)}catch(i){return!1}}static isPayloadValid(n,i){switch(n){case g.CONNECT:return"object"==typeof i;case g.DISCONNECT:return void 0===i;case g.CONNECT_ERROR:return"string"==typeof i||"object"==typeof i;case g.EVENT:case g.BINARY_EVENT:return Array.isArray(i)&&i.length>0;case g.ACK:case g.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}class te{constructor(n){this.packet=n,this.buffers=[],this.reconPack=n}takeBinaryData(n){if(this.buffers.push(n),this.buffers.length===this.reconPack.attachments){const i=jt(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function w(o,n,i){return o.on(n,i),function(){o.off(n,i)}}const ee=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class at extends C{constructor(n,i,e){super(),this.connected=!1,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=n,this.nsp=i,e&&e.auth&&(this.auth=e.auth),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const n=this.io;this.subs=[w(n,"open",this.onopen.bind(this)),w(n,"packet",this.onpacket.bind(this)),w(n,"error",this.onerror.bind(this)),w(n,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...n){return n.unshift("message"),this.emit.apply(this,n),this}emit(n,...i){if(ee.hasOwnProperty(n))throw new Error('"'+n+'" is a reserved event name');i.unshift(n);const e={type:g.EVENT,data:i,options:{}};if(e.options.compress=!1!==this.flags.compress,"function"==typeof i[i.length-1]){const a=this.ids++,c=i.pop();this._registerAckCallback(a,c),e.id=a}return this.flags.volatile&&(!(this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable)||!this.connected)||(this.connected?(this.notifyOutgoingListeners(e),this.packet(e)):this.sendBuffer.push(e)),this.flags={},this}_registerAckCallback(n,i){const e=this.flags.timeout;if(void 0===e)return void(this.acks[n]=i);const r=this.io.setTimeoutFn(()=>{delete this.acks[n];for(let s=0;s<this.sendBuffer.length;s++)this.sendBuffer[s].id===n&&this.sendBuffer.splice(s,1);i.call(this,new Error("operation has timed out"))},e);this.acks[n]=(...s)=>{this.io.clearTimeoutFn(r),i.apply(this,[null,...s])}}packet(n){n.nsp=this.nsp,this.io._packet(n)}onopen(){"function"==typeof this.auth?this.auth(n=>{this.packet({type:g.CONNECT,data:n})}):this.packet({type:g.CONNECT,data:this.auth})}onerror(n){this.connected||this.emitReserved("connect_error",n)}onclose(n,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",n,i)}onpacket(n){if(n.nsp===this.nsp)switch(n.type){case g.CONNECT:n.data&&n.data.sid?this.onconnect(n.data.sid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case g.EVENT:case g.BINARY_EVENT:this.onevent(n);break;case g.ACK:case g.BINARY_ACK:this.onack(n);break;case g.DISCONNECT:this.ondisconnect();break;case g.CONNECT_ERROR:this.destroy();const e=new Error(n.data.message);e.data=n.data.data,this.emitReserved("connect_error",e)}}onevent(n){const i=n.data||[];null!=n.id&&i.push(this.ack(n.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(n){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const e of i)e.apply(this,n)}super.emit.apply(this,n)}ack(n){const i=this;let e=!1;return function(...r){e||(e=!0,i.packet({type:g.ACK,id:n,data:r}))}}onack(n){const i=this.acks[n.id];"function"==typeof i&&(i.apply(this,n.data),delete this.acks[n.id])}onconnect(n){this.id=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(n=>this.emitEvent(n)),this.receiveBuffer=[],this.sendBuffer.forEach(n=>{this.notifyOutgoingListeners(n),this.packet(n)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(n=>n()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:g.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(n){return this.flags.compress=n,this}get volatile(){return this.flags.volatile=!0,this}timeout(n){return this.flags.timeout=n,this}onAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(n),this}prependAny(n){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(n),this}offAny(n){if(!this._anyListeners)return this;if(n){const i=this._anyListeners;for(let e=0;e<i.length;e++)if(n===i[e])return i.splice(e,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(n),this}prependAnyOutgoing(n){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(n),this}offAnyOutgoing(n){if(!this._anyOutgoingListeners)return this;if(n){const i=this._anyOutgoingListeners;for(let e=0;e<i.length;e++)if(n===i[e])return i.splice(e,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(n){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const e of i)e.apply(this,n.data)}}}function J(o){this.ms=(o=o||{}).min||100,this.max=o.max||1e4,this.factor=o.factor||2,this.jitter=o.jitter>0&&o.jitter<=1?o.jitter:0,this.attempts=0}J.prototype.duration=function(){var o=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var n=Math.random(),i=Math.floor(n*this.jitter*o);o=0==(1&Math.floor(10*n))?o-i:o+i}return 0|Math.min(o,this.max)},J.prototype.reset=function(){this.attempts=0},J.prototype.setMin=function(o){this.ms=o},J.prototype.setMax=function(o){this.max=o},J.prototype.setJitter=function(o){this.jitter=o};class tt extends C{constructor(n,i){var e;super(),this.nsps={},this.subs=[],n&&"object"==typeof n&&(i=n,n=void 0),(i=i||{}).path=i.path||"/socket.io",this.opts=i,G(this,i),this.reconnection(!1!==i.reconnection),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(e=i.randomizationFactor)&&void 0!==e?e:.5),this.backoff=new J({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==i.timeout?2e4:i.timeout),this._readyState="closed",this.uri=n;const r=i.parser||y;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==i.autoConnect,this._autoConnect&&this.open()}reconnection(n){return arguments.length?(this._reconnection=!!n,this):this._reconnection}reconnectionAttempts(n){return void 0===n?this._reconnectionAttempts:(this._reconnectionAttempts=n,this)}reconnectionDelay(n){var i;return void 0===n?this._reconnectionDelay:(this._reconnectionDelay=n,null===(i=this.backoff)||void 0===i||i.setMin(n),this)}randomizationFactor(n){var i;return void 0===n?this._randomizationFactor:(this._randomizationFactor=n,null===(i=this.backoff)||void 0===i||i.setJitter(n),this)}reconnectionDelayMax(n){var i;return void 0===n?this._reconnectionDelayMax:(this._reconnectionDelayMax=n,null===(i=this.backoff)||void 0===i||i.setMax(n),this)}timeout(n){return arguments.length?(this._timeout=n,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(n){if(~this._readyState.indexOf("open"))return this;this.engine=new bt(this.uri,this.opts);const i=this.engine,e=this;this._readyState="opening",this.skipReconnect=!1;const r=w(i,"open",function(){e.onopen(),n&&n()}),s=w(i,"error",a=>{e.cleanup(),e._readyState="closed",this.emitReserved("error",a),n?n(a):e.maybeReconnectOnOpen()});if(!1!==this._timeout){const a=this._timeout;0===a&&r();const c=this.setTimeoutFn(()=>{r(),i.close(),i.emit("error",new Error("timeout"))},a);this.opts.autoUnref&&c.unref(),this.subs.push(function(){clearTimeout(c)})}return this.subs.push(r),this.subs.push(s),this}connect(n){return this.open(n)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const n=this.engine;this.subs.push(w(n,"ping",this.onping.bind(this)),w(n,"data",this.ondata.bind(this)),w(n,"error",this.onerror.bind(this)),w(n,"close",this.onclose.bind(this)),w(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(n){this.decoder.add(n)}ondecoded(n){this.emitReserved("packet",n)}onerror(n){this.emitReserved("error",n)}socket(n,i){let e=this.nsps[n];return e||(e=new at(this,n,i),this.nsps[n]=e),e}_destroy(n){const i=Object.keys(this.nsps);for(const e of i)if(this.nsps[e].active)return;this._close()}_packet(n){const i=this.encoder.encode(n);for(let e=0;e<i.length;e++)this.engine.write(i[e],n.options)}cleanup(){this.subs.forEach(n=>n()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(n,i){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",n,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const n=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const e=this.setTimeoutFn(()=>{n.skipReconnect||(this.emitReserved("reconnect_attempt",n.backoff.attempts),!n.skipReconnect&&n.open(r=>{r?(n._reconnecting=!1,n.reconnect(),this.emitReserved("reconnect_error",r)):n.onreconnect()}))},i);this.opts.autoUnref&&e.unref(),this.subs.push(function(){clearTimeout(e)})}}onreconnect(){const n=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",n)}}const Y={};function U(o,n){"object"==typeof o&&(n=o,o=void 0);const i=function Qt(o,n="",i){let e=o;i=i||"undefined"!=typeof location&&location,null==o&&(o=i.protocol+"//"+i.host),"string"==typeof o&&("/"===o.charAt(0)&&(o="/"===o.charAt(1)?i.protocol+o:i.host+o),/^(https?|wss?):\/\//.test(o)||(o=void 0!==i?i.protocol+"//"+o:"https://"+o),e=L(o)),e.port||(/^(http|ws)$/.test(e.protocol)?e.port="80":/^(http|ws)s$/.test(e.protocol)&&(e.port="443")),e.path=e.path||"/";const s=-1!==e.host.indexOf(":")?"["+e.host+"]":e.host;return e.id=e.protocol+"://"+s+":"+e.port+n,e.href=e.protocol+"://"+s+(i&&i.port===e.port?"":":"+e.port),e}(o,(n=n||{}).path||"/socket.io"),e=i.source,r=i.id;let l;return n.forceNew||n["force new connection"]||!1===n.multiplex||Y[r]&&i.path in Y[r].nsps?l=new tt(e,n):(Y[r]||(Y[r]=new tt(e,n)),l=Y[r]),i.query&&!n.query&&(n.query=i.queryKey),l.socket(i.path,n)}Object.assign(U,{Manager:tt,Socket:at,io:U,connect:U});new f.OlP("__SOCKET_IO_CONFIG__");var ne=h(2340),se=h(263);let ie=(()=>{class o extends class Pt{constructor(n){this.config=n,this.subscribersCounter={},this.eventObservables$={},this.emptyConfig={url:"",options:{}},void 0===n&&(n=this.emptyConfig),this.ioSocket=(U||p)(n.url,n.options)}of(n){this.ioSocket.of(n)}on(n,i){this.ioSocket.on(n,i)}once(n,i){this.ioSocket.once(n,i)}connect(){return this.ioSocket.connect()}disconnect(n){return this.ioSocket.disconnect.apply(this.ioSocket,arguments)}emit(n,...i){return this.ioSocket.emit.apply(this.ioSocket,arguments)}removeListener(n,i){return this.ioSocket.removeListener.apply(this.ioSocket,arguments)}removeAllListeners(n){return this.ioSocket.removeAllListeners.apply(this.ioSocket,arguments)}fromEvent(n){return this.subscribersCounter[n]||(this.subscribersCounter[n]=0),this.subscribersCounter[n]++,this.eventObservables$[n]||(this.eventObservables$[n]=new t.y(i=>{const e=r=>{i.next(r)};return this.ioSocket.on(n,e),()=>{this.subscribersCounter[n]--,0===this.subscribersCounter[n]&&(this.ioSocket.removeListener(n,e),delete this.eventObservables$[n])}}).pipe((0,M.B)())),this.eventObservables$[n]}fromOneTimeEvent(n){return new Promise(i=>this.once(n,i))}}{constructor(i){super({url:ne.N.socket_url,options:{query:{userId:JSON.parse(localStorage.getItem("auth")).user._id}}}),this.authService=i,this.url=`${ne.N.url_api}`,this.socket=this.ioSocket,this.users=this.listen("connected"),this.message=this.listen("message"),this.socket=this.ioSocket,this.getSocketId()}registerUser(i){console.log("Tu socket:",i)}getSocketId(){this.listen("connected").subscribe(i=>{localStorage.setItem("socketId",i)}),this.listen("disconnect").subscribe(i=>{localStorage.removeItem("socketId")})}listen(i){const e=new f.vpe;return this.socket.on(i,r=>e.emit(r)),e}emit(i,e){this.socket.emit(i,e)}}return o.\u0275fac=function(i){return new(i||o)(f.LFG(se.e))},o.\u0275prov=f.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},5682:(ct,Z,h)=>{h.r(Z),h.d(Z,{MainModule:()=>i});var y=h(9808),p=h(3075),f=h(9291),t=h(5e3);let M=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:1,vars:0,consts:[["src","assets/images/logo-home.png","alt","Logo de senntmessages"]],template:function(s,a){1&s&&t._UZ(0,"img",0)},styles:["[_nghost-%COMP%]{background:rgba(68,188,255,.12);display:none;height:100vh;width:100%}img[_ngcontent-%COMP%]{max-width:100%;margin:0 auto;display:block;position:relative;top:50%;transform:translateY(-50%)}@media (min-width: 1024px){[_nghost-%COMP%]{display:block}}"]}),e})();var x=h(5861),O=h(7579),E=h(9300),b=h(2340),A=h(9233),d=h(3716),m=h(4450),_=h(8187),R=h(2349),P=h(5245),I=h(7423);function oe(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.answer(!0))}),t.TgZ(1,"mat-icon"),t._uU(2,"call"),t.qZA()()}}function wt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"div",2),t._UZ(1,"img",3),t.TgZ(2,"div",4)(3,"p",5),t._uU(4),t.qZA(),t.TgZ(5,"p",6),t._uU(6),t.qZA()(),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.answer(!1))}),t.TgZ(9,"mat-icon"),t._uU(10,"call_end"),t.qZA()(),t.YNc(11,oe,3,0,"button",9),t.qZA()()}if(2&e){const s=t.oxw(),a=t.MAs(2);t.xp6(1),t.Q6J("src",s.data.from.image.url,t.LSH),t.xp6(3),t.Oqu(s.data.from.name),t.xp6(2),t.hij("~ ",s.data.from.username,""),t.xp6(5),t.Q6J("ngIf","voice"==s.data.type)("ngIfElse",a)}}function Tt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.answer(!0))}),t.TgZ(1,"mat-icon"),t._uU(2,"videocam"),t.qZA()()}}let kt=(()=>{class e{constructor(s,a){this.dialogRef=s,this.modalData=a}ngOnInit(){this.data=this.modalData}answer(s){var a=this;return(0,x.Z)(function*(){yield a.dialogRef.close({answer:s})})()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(R.so),t.Y36(R.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-incoming-call"]],decls:3,vars:1,consts:[["class","contain",4,"ngIf"],["video",""],[1,"contain"],["alt","imagen de usuario",3,"src"],[1,"text"],[1,"name"],[1,"username"],[1,"buttons"],["mat-fab","","color","primary",1,"btn_colgar",3,"click"],["mat-fab","","color","primary","class","btn_answer animate__animated animate__bounce animate__infinite",3,"click",4,"ngIf","ngIfElse"],["mat-fab","","color","primary",1,"btn_answer","animate__animated","animate__bounce","animate__infinite",3,"click"]],template:function(s,a){1&s&&(t.YNc(0,wt,12,5,"div",0),t.YNc(1,Tt,3,0,"ng-template",null,1,t.W1O)),2&s&&t.Q6J("ngIf",a.data)},dependencies:[y.O5,P.Hw,I.lW],styles:[".contain[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#3fbf1f}.contain[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;object-fit:cover;border-radius:50%;box-shadow:0 0 6px #ccc;margin-bottom:10px}.contain[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{text-align:center;margin-bottom:30px}.contain[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:30px;margin:10px 0!important}.contain[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:20px;margin:0 0 10px!important}.contain[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 20px}.contain[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn_colgar[_ngcontent-%COMP%]{background:#ef0505}.contain[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .btn_answer[_ngcontent-%COMP%]{background:#198f19}"]}),e})();var F=h(263),D=h(3175),lt=h(273),H=h(5620),q=h(2525),et=h(3251),K=h(4118);const C={af:"Afrikaans",sq:"Albanian",ar:"Arabic",hy:"Armenian",az:"Azerbaijani",bn:"Bengali",bs:"Bosnian",bg:"Bulgarian",ca:"Catalan",ceb:"Cebuano",ny:"Chichewa","zh-CN":"Chinese Simplified","zh-TW":"Chinese Traditional",co:"Corsican",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch",en:"English",eo:"Esperanto",et:"Estonian",tl:"Filipino",fi:"Finnish",fr:"French",fy:"Frisian",gl:"Galician",ka:"Georgian",de:"German",el:"Greek",gu:"Gujarati",ht:"Haitian Creole",ha:"Hausa",haw:"Hawaiian",iw:"Hebrew",hi:"Hindi",hmn:"Hmong",hu:"Hungarian",is:"Icelandic",ig:"Igbo",id:"Indonesian",ga:"Irish",it:"Italian",ja:"Japanese",jw:"Javanese",kn:"Kannada",kk:"Kazakh",km:"Khmer",ko:"Korean",ku:"Kurdish (Kurmanji)",ky:"Kyrgyz",lo:"Lao",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"Macedonian",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mn:"Mongolian",my:"Myanmar (Burmese)",ne:"Nepali",no:"Norwegian",ps:"Pashto",fa:"Persian",pl:"Polish",pt:"Portuguese",ro:"Romanian",ru:"Russian",sm:"Samoan",gd:"Scots Gaelic",sr:"Serbian",st:"Sesotho",sn:"Shona",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",es:"Spanish",su:"Sudanese",sw:"Swahili",sv:"Swedish",tg:"Tajik",ta:"Tamil",te:"Telugu",th:"Thai",tr:"Turkish",uz:"Uzbek",vi:"Vietnamese",cy:"Welsh",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",zu:"Zulu"};var S=h(8372),Q=h(8386),z=h(773),At=h(2368),G=h(1054);function St(e,r){if(1&e&&(t.TgZ(0,"div",14)(1,"a",15),t.ALo(2,"location"),t._uU(3,"Shared location"),t.qZA()()),2&e){const s=t.oxw();t.xp6(1),t.s9C("href",t.lcZ(2,1,s.shareData),t.LSH)}}function Zt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",21),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.cleanSearch())}),t._uU(1,"close"),t.qZA()}}function Et(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"div",16)(1,"input",17),t.NdJ("focus",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.search())})("blur",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.search(!1))}),t.qZA(),t.TgZ(2,"mat-icon",18),t._uU(3,"search"),t.qZA(),t._UZ(4,"mat-spinner",19),t.YNc(5,Zt,2,0,"mat-icon",20),t.qZA()}if(2&e){const s=t.oxw();t.xp6(1),t.Q6J("formControl",s.inputSearch),t.xp6(4),t.Q6J("ngIf",s.inputSearch.value)}}function It(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"div",25),t.NdJ("click",function(){const l=t.CHM(s).$implicit,u=t.oxw(2);return t.KtG(u.selectLang(l))}),t._uU(1),t.qZA()}if(2&e){const s=r.$implicit;t.xp6(1),t.Oqu(s[1])}}function ht(e,r){if(1&e&&(t.TgZ(0,"div",22)(1,"div",23)(2,"span"),t._uU(3,"Actual language: "),t.qZA(),t._uU(4),t.qZA(),t.YNc(5,It,2,1,"div",24),t.qZA()),2&e){const s=t.oxw();t.xp6(4),t.Oqu(s.langActive),t.xp6(1),t.Q6J("ngForOf",s.langs)}}let ut=(()=>{class e{constructor(s,a){var c,l;this.userService=s,this.authService=a,this.eventOpenAlert=new O.x,this.inputSearch=new p.NI,this.active=!1,this.share=!1,this.shareData=null;try{this.langActive=JSON.parse(localStorage.getItem("language")).lang}catch(u){localStorage.removeItem("language")}this.active=!!this.langActive,this.langs=Object.entries(C),this.user=this.authService.getMyUser(),null!==(l=null===(c=this.user)||void 0===c?void 0:c.location)&&void 0!==l&&l.latitud&&(this.share=!0,this.shareData=this.user.location)}ngOnInit(){}close(){const s=document.getElementById("div_settings");s.classList.add("animate__slideOutLeft"),setTimeout(()=>{s.style.display="none",s.classList.remove("animate__slideOutLeft")},500)}loading(s=!0){const a=document.getElementById("loading");s?a.style.display="block":setTimeout(()=>{a.style.display="none"},1e3)}cleanSearch(){document.getElementById("inputSearch").focus(),this.inputSearch.setValue("")}search(s=!0){s?this.searchSubscription=this.inputSearch.valueChanges.pipe((0,S.b)(100)).subscribe(a=>{if(a){const c=this.langs.filter(l=>{const u=a.toLowerCase();return!!l[1].toLowerCase().includes(u)&&l});this.langs=c}else this.langs=Object.entries(C)}):this.searchSubscription.unsubscribe()}selectLang(s){localStorage.setItem("language",JSON.stringify({lang:s[1],abr:s[0]})),this.langActive=s[1],(0,_.O1)(this.eventOpenAlert,`Messages language updated to ${s[1]} successfully`)}toggleActive(s){this.active=s.checked,this.active?this.selectLang(["en","English"]):localStorage.removeItem("language")}toggleShare(s){this.share=s.checked,this.share?((0,_.O1)(this.eventOpenAlert,"Getting and sending location"),this.userService.getPosition().then(a=>{this.userService.updateLocation({longitud:a.coords.longitude,latitud:a.coords.latitude}).subscribe(l=>{(0,_.M6)(this.eventOpenAlert),this.shareData=l.location,this.authService.updateAuthUser(l)})}).catch(a=>(0,_.O1)(this.eventOpenAlert,"Unable to record audio. Give microphone permission and try again"))):(this.shareData=null,(0,_.O1)(this.eventOpenAlert,"Removing location"),this.userService.deleteLocation().subscribe(a=>{console.log(a),(0,_.M6)(this.eventOpenAlert),this.shareData=null,this.authService.updateAuthUser(a)}))}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(Q.K),t.Y36(F.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-settings"]],decls:21,vars:6,consts:[[1,"container"],[1,"header"],[1,"back",3,"click"],[1,"main"],["id","options_settings"],[1,"share_location"],[1,"text"],[3,"checked","change"],["class","data",4,"ngIf"],[1,"lang","notTranslate"],["class","search",4,"ngIf"],["id","langs"],["class","langs",4,"ngIf"],[3,"eventOpenAlert"],[1,"data"],["mat-raised-button","","target","_blank",3,"href"],[1,"search"],["type","text","id","inputSearch","placeholder","Search language","autocomplete","off",3,"formControl","focus","blur"],[1,"search-icon"],["id","loading",1,"spinner-users"],["id","clean-search",3,"click",4,"ngIf"],["id","clean-search",3,"click"],[1,"langs"],[1,"lang"],["class","lang",3,"click",4,"ngFor","ngForOf"],[1,"lang",3,"click"]],template:function(s,a){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),t.NdJ("click",function(){return a.close()}),t._uU(3,"arrow_back"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Select messages language"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"h3"),t._uU(11,"Share location"),t.qZA(),t.TgZ(12,"mat-slide-toggle",7),t.NdJ("change",function(l){return a.toggleShare(l)}),t.qZA()(),t.YNc(13,St,4,3,"div",8),t.qZA(),t.TgZ(14,"div",9),t._uU(15,"Translate messages "),t.TgZ(16,"mat-slide-toggle",7),t.NdJ("change",function(l){return a.toggleActive(l)}),t.qZA()(),t.YNc(17,Et,6,2,"div",10),t.qZA(),t.TgZ(18,"div",11),t.YNc(19,ht,6,2,"div",12),t.qZA()(),t._UZ(20,"app-mini-alert",13),t.qZA()),2&s&&(t.xp6(12),t.Q6J("checked",a.share),t.xp6(1),t.Q6J("ngIf",null==a.shareData?null:a.shareData.latitud),t.xp6(3),t.Q6J("checked",a.active),t.xp6(1),t.Q6J("ngIf",a.active),t.xp6(2),t.Q6J("ngIf",a.active),t.xp6(1),t.Q6J("eventOpenAlert",a.eventOpenAlert.asObservable()))},dependencies:[y.sg,y.O5,P.Hw,I.zs,z.Ou,At.Rr,p.Fj,p.JJ,p.oH,K.O,G.p],styles:["[_ngcontent-%COMP%]:root{--animate-delay: 0s}.animate__delay-2s[_ngcontent-%COMP%]{animation-delay:.2s!important}[_nghost-%COMP%]{display:none;position:absolute;top:0;z-index:100;height:100%;width:100%;background:#fff}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background:#6405B3;background:#446678;background:#480481;height:110px;height:100px;display:flex;align-items:end;padding:20px 10px 18px 15px;color:#fff}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;padding:0 15px 3px 13px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;border-radius:50px;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{background:#56049a}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:calc(100% - 120px);width:100%;overflow-y:auto;overflow-x:hidden;padding-bottom:25px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8d0cf8}.container[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]{color:#000;padding:20px 40px;font-size:19px;cursor:pointer;border-top:1px solid rgba(72,4,129,.0784313725)}.container[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]:hover{background:#f0f8ff}.container[_ngcontent-%COMP%]   .lang[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}.container[_ngcontent-%COMP%]   .lang.notTranslate[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.search[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;border-bottom:1px solid #efefef;position:sticky;top:0;background:#fff;padding-top:10px;z-index:100}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;width:94%;margin:10px auto;background:rgba(68,188,255,.3490196078);padding:10px 30px 10px 42px;border-radius:50px;color:#686868}.search[_ngcontent-%COMP%]   mat-icon.search-icon[_ngcontent-%COMP%]{position:absolute;left:5.2%;top:28px;color:#919191}.search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{width:20px!important;height:20px!important;color:#919191;cursor:pointer;position:absolute;right:7%;top:27px}.alert[_ngcontent-%COMP%]{font-size:13px;color:red;width:-moz-fit-content;width:fit-content;margin-bottom:3px}.alert.error[_ngcontent-%COMP%]{color:red}.alert.ok[_ngcontent-%COMP%]{color:#22a522}#options_settings[_ngcontent-%COMP%]{color:#000;position:sticky;top:0;background:#fff;z-index:300}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]{padding:20px 45px 0}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]:hover{background:#f0f8ff}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:baseline}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}#options_settings[_ngcontent-%COMP%]   .share_location[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{padding-bottom:25px}"]}),e})();var $=h(7544);let pt=(()=>{class e{transform(s){let a=s;if(s){const c=new Date,l=new Date(Date.parse(s)),u=`${l.getDate()}/${k(l.getMonth())}/${l.getFullYear()}`;let v=new Date;v=`${v.getDate()}/${k(v.getMonth())}/${v.getFullYear()}`;let T=new Date(c.getTime()-864e5);T=`${T.getDate()}/${k(T.getMonth())}/${T.getFullYear()}`;let B=new Date(c.getTime()-6048e5);if(u===v){let N=l.getMinutes();N<10&&(N=`0${N}`),a=`${l.getHours()}:${N}`}else a=u===T?"Yesterday":l.getTime()>B.getTime()&&l.getTime()<c.getTime()&&l.getDay()!==c.getDay()?function dt(e){switch(e){case 1:default:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 0:return"Sunday"}}(l.getDay()):u}return a}}return e.\u0275fac=function(s){return new(s||e)},e.\u0275pipe=t.Yjl({name:"createDate",type:e,pure:!0}),e})();function k(e){switch(e){case 0:default:return"01";case 1:return"02";case 2:return"03";case 3:return"04";case 4:return"05";case 5:return"06";case 6:return"07";case 7:return"08";case 8:return"09";case 9:return"10";case 10:return"11";case 11:return"12"}}function gt(e,r){1&e&&(t.TgZ(0,"p",5),t._uU(1,"No chats found "),t._UZ(2,"br"),t._uU(3," Start one!"),t.qZA())}const ft=function(e){return{read:e}};function ae(e,r){if(1&e&&(t.TgZ(0,"mat-icon",17),t._uU(1,"done_all"),t.qZA()),2&e){const s=t.oxw().$implicit;t.Q6J("ngClass",t.VKq(1,ft,null==s.lastMessage?null:s.lastMessage.read))}}function mt(e,r){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"photo_camera"),t.qZA())}function _t(e,r){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"insert_drive_file"),t.qZA())}function Ut(e,r){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"keyboard_voice"),t.qZA())}function Ct(e,r){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"location_on"),t.qZA())}function Nt(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const s=t.oxw().$implicit;t.xp6(1),t.Oqu((null==s.lastMessage?null:s.lastMessage.message)||"~~")}}function vt(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const s=t.oxw().$implicit;t.xp6(1),t.Oqu((null==s.lastMessage?null:s.lastMessage.message.trim())||"Photo")}}function Rt(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const s=t.oxw().$implicit;t.xp6(1),t.Oqu((null==s.lastMessage?null:s.lastMessage.doc.name)||"Document")}}function qt(e,r){if(1&e&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&e){const s=t.oxw().$implicit;t.xp6(1),t.Oqu((null==s.lastMessage||null==s.lastMessage.doc?null:s.lastMessage.doc.time)||"Audio")}}function Lt(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"Location"),t.qZA())}function V(e,r){if(1&e&&(t.TgZ(0,"p"),t._UZ(1,"span",18),t.qZA()),2&e){const s=t.oxw().$implicit;t.xp6(1),t.Q6J("matBadge",s.noRead)}}function yt(e,r){if(1&e&&(t.TgZ(0,"div",7),t._UZ(1,"img",8),t.TgZ(2,"div",9)(3,"div",10)(4,"p",11),t._uU(5),t.qZA(),t.TgZ(6,"p",12),t._uU(7),t.ALo(8,"createDate"),t.qZA()(),t.TgZ(9,"div",13)(10,"div",14),t.YNc(11,ae,2,3,"mat-icon",15),t.YNc(12,mt,2,0,"mat-icon",16),t.YNc(13,_t,2,0,"mat-icon",16),t.YNc(14,Ut,2,0,"mat-icon",16),t.YNc(15,Ct,2,0,"mat-icon",16),t.YNc(16,Nt,2,1,"p",16),t.YNc(17,vt,2,1,"p",16),t.YNc(18,Rt,2,1,"p",16),t.YNc(19,qt,2,1,"p",16),t.YNc(20,Lt,2,0,"p",16),t.qZA(),t.YNc(21,V,2,1,"p",16),t.qZA()()()),2&e){const s=r.$implicit,a=t.oxw(3);t.MGl("routerLink","/chat/",s._id,""),t.xp6(1),t.Q6J("src",a.getUser(s.users).image.url,t.LSH)("alt",a.user.name),t.xp6(4),t.Oqu(a.getUser(s.users).name),t.xp6(2),t.Oqu(t.lcZ(8,16,(null==s.lastMessage?null:s.lastMessage.createdAt)||s.updatedAt)),t.xp6(4),t.Q6J("ngIf",(null==s.lastMessage?null:s.lastMessage.from)===a.user._id),t.xp6(1),t.Q6J("ngIf",null==s.lastMessage?null:s.lastMessage.image),t.xp6(1),t.Q6J("ngIf",(null==s.lastMessage?null:s.lastMessage.doc)&&"audio"!=(null==s||null==s.lastMessage||null==s.lastMessage.doc?null:s.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",(null==s.lastMessage?null:s.lastMessage.doc)&&"audio"==(null==s||null==s.lastMessage||null==s.lastMessage.doc?null:s.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",null==s.lastMessage?null:s.lastMessage.location),t.xp6(1),t.Q6J("ngIf",!(null!=s.lastMessage&&s.lastMessage.image)),t.xp6(1),t.Q6J("ngIf",null==s.lastMessage?null:s.lastMessage.image),t.xp6(1),t.Q6J("ngIf",(null==s.lastMessage?null:s.lastMessage.doc)&&"audio"!=(null==s.lastMessage||null==s.lastMessage.doc?null:s.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",(null==s.lastMessage?null:s.lastMessage.doc)&&"audio"==(null==s.lastMessage||null==s.lastMessage.doc?null:s.lastMessage.doc.mimetype.split("/")[0])),t.xp6(1),t.Q6J("ngIf",null==s.lastMessage?null:s.lastMessage.location),t.xp6(1),t.Q6J("ngIf",s.noRead&&s.noRead>0)}}function Jt(e,r){if(1&e&&t.YNc(0,yt,22,18,"div",6),2&e){const s=t.oxw(2);t.Q6J("ngForOf",s.chats)}}function W(e,r){if(1&e&&(t.TgZ(0,"div",2),t.YNc(1,gt,4,0,"p",3),t.YNc(2,Jt,1,1,"ng-template",null,4,t.W1O),t.qZA()),2&e){const s=t.MAs(3),a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.chats.length<1)("ngIfElse",s)}}function nt(e,r){1&e&&t._UZ(0,"mat-spinner",19)}let Bt=(()=>{class e{constructor(s,a,c){this.authService=s,this.chatService=a,this.store=c}ngOnInit(){this.user=this.authService.getMyUser(),this.updateChats.subscribe(s=>{this.user=this.authService.getMyUser(),this.getChats()}),this.getChats(),this.subcribeChats()}getUser(s){return s.find(a=>a._id!=this.user._id)}getChats(){this.chatService.getAllChats().subscribe(s=>{this.store.dispatch(new m.vh(s))})}subcribeChats(){this.store.select("chats").subscribe(s=>{this.chats=this.chatService.sortChats([...s])})}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(F.e),t.Y36(D.a),t.Y36(H.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-chats"]],inputs:{updateChats:"updateChats"},decls:3,vars:2,consts:[["class","chats",4,"ngIf","ngIfElse"],["loading",""],[1,"chats"],["class","textNoFound",4,"ngIf","ngIfElse"],["chatsContainer",""],[1,"textNoFound"],["routerLinkActive","active","class","chat",3,"routerLink",4,"ngFor","ngForOf"],["routerLinkActive","active",1,"chat",3,"routerLink"],[3,"src","alt"],[1,"chat__info"],[1,"user"],[1,"user__name"],[1,"chat__info__time"],[1,"chat__div-message"],[1,"chat__info__message"],["class","icon-done",3,"ngClass",4,"ngIf"],[4,"ngIf"],[1,"icon-done",3,"ngClass"],["matBadgeOverlap","false",3,"matBadge"],["id","loading",1,"spinner-chat"]],template:function(s,a){if(1&s&&(t.YNc(0,W,4,2,"div",0),t.YNc(1,nt,1,0,"ng-template",null,1,t.W1O)),2&s){const c=t.MAs(2);t.Q6J("ngIf",a.chats)("ngIfElse",c)}},dependencies:[y.mk,y.sg,y.O5,f.rH,f.Od,P.Hw,$.k,z.Ou,pt],styles:[".chat[_ngcontent-%COMP%]{cursor:pointer;display:flex;justify-content:space-between;align-items:center;padding:11px 20px 11px 14px}.chat[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:47px;height:47px;border-radius:50px;object-fit:cover;margin-right:10px}.chat__info[_ngcontent-%COMP%]{border-bottom:1px solid #efefef;padding-bottom:5px;padding-top:6.5px;width:100%;height:55px}.chat__info__time[_ngcontent-%COMP%]{color:#446678;font-size:12px}.chat__info__message[_ngcontent-%COMP%]{color:#535353;font-size:16px;display:flex;align-items:center;white-space:nowrap;margin-right:5px!important;overflow:hidden;border-bottom:none}.chat__info__message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline;text-overflow:ellipsis;overflow:hidden}.chat__info__message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{transform:scale(.7)}.chat__info__message[_ngcontent-%COMP%]   .read[_ngcontent-%COMP%]{color:#009ef7}.chat__div-message[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 22px;align-items:center;height:28px}.chat[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{max-width:18px;max-height:18px}.chat[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center}.chat[_ngcontent-%COMP%]   .user__name[_ngcontent-%COMP%]{font-size:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:10px!important;color:#000!important}.chat[_ngcontent-%COMP%]:hover{background:#f9f9f9}.chat.active[_ngcontent-%COMP%]{background:#f0f0f0}.textNoFound[_ngcontent-%COMP%]{text-align:center;font-size:17px;margin-top:30px!important;color:#8a8a8a}"]}),e})();function xt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",8),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.cleanSearch())}),t._uU(1,"close"),t.qZA()}}function Ft(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){const l=t.CHM(s).$implicit,u=t.oxw(2);return t.KtG(u.createChat(l._id,l.chatId))}),t._UZ(1,"img",11),t.TgZ(2,"div",12)(3,"div",13)(4,"p",14),t._uU(5),t.qZA(),t.TgZ(6,"p",15),t._uU(7),t.qZA()(),t.TgZ(8,"mat-icon"),t._uU(9,"comment"),t.qZA()()()}if(2&e){const s=r.$implicit;t.xp6(1),t.Q6J("src",s.image.url,t.LSH)("alt",s.name),t.xp6(4),t.Oqu(s.name),t.xp6(2),t.Oqu(s.username)}}function Yt(e,r){if(1&e&&(t.TgZ(0,"div"),t.YNc(1,Ft,10,4,"div",9),t.qZA()),2&e){const s=t.oxw();t.xp6(1),t.Q6J("ngForOf",s.users)}}function Dt(e,r){1&e&&(t.TgZ(0,"p",16),t._uU(1,"No users found."),t.qZA())}let Ht=(()=>{class e{constructor(s,a,c,l){this.userService=s,this.chatService=a,this.authService=c,this.router=l,this.chatsUpdated=new t.vpe,this.inputSearch=new p.NI}ngOnInit(){this.getUsers(),this.update.subscribe(s=>{this.getUsers()})}getUsers(){this.userService.getAll().subscribe(s=>{this.users=s,this.allUsers=s})}createChat(s,a){a?this.router.navigate([`/chat/${a}`]):(this.loading(),this.chatService.getChatId(s).subscribe(c=>{this.users.find(l=>l._id==s).chatId=c._id,this.chatsUpdated.emit(),this.router.navigate([`/chat/${c._id}`]),this.loading(!1)}))}loading(s=!0){const a=document.getElementById("loading");s?a.style.display="block":setTimeout(()=>{a.style.display="none"},1e3)}cleanSearch(){document.getElementById("inputSearch").focus(),this.inputSearch.setValue("")}search(s=!0){s?this.searchSubscription=this.inputSearch.valueChanges.pipe((0,S.b)(100)).subscribe(a=>{const c=this.allUsers.filter(l=>{const u=l.name.toUpperCase(),v=l.username.toUpperCase(),T=a.toUpperCase();return!(!u.includes(T)&&!v.includes(T))&&l});this.users=c}):this.searchSubscription.unsubscribe()}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(Q.K),t.Y36(D.a),t.Y36(F.e),t.Y36(f.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-users"]],inputs:{update:["updateUsers","update"]},outputs:{chatsUpdated:"chatsUpdated"},decls:10,vars:4,consts:[[1,"users"],[1,"search"],["type","text","id","inputSearch","placeholder","Search users by name and username","autocomplete","off",3,"formControl","focus","blur"],[1,"search-icon"],["id","loading",1,"spinner-users"],["id","clean-search",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["noFound",""],["id","clean-search",3,"click"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src","alt"],[1,"data"],[1,"data__text"],[1,"name"],[1,"username"],[1,"textNoFound"]],template:function(s,a){if(1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"input",2),t.NdJ("focus",function(){return a.search()})("blur",function(){return a.search(!1)}),t.qZA(),t.TgZ(3,"mat-icon",3),t._uU(4,"search"),t.qZA(),t._UZ(5,"mat-spinner",4),t.YNc(6,xt,2,0,"mat-icon",5),t.qZA(),t.YNc(7,Yt,2,1,"div",6),t.YNc(8,Dt,2,0,"ng-template",null,7,t.W1O),t.qZA()),2&s){const c=t.MAs(9);t.xp6(2),t.Q6J("formControl",a.inputSearch),t.xp6(4),t.Q6J("ngIf",a.inputSearch.value),t.xp6(1),t.Q6J("ngIf",(null==a.users?null:a.users.length)>0)("ngIfElse",c)}},dependencies:[y.sg,y.O5,P.Hw,z.Ou,p.Fj,p.JJ,p.oH],styles:[".users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{cursor:pointer;display:grid;padding:10px 20px;grid-template-columns:auto 1fr}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50px;object-fit:cover;margin-right:10px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 24px;align-items:center;border-bottom:1px solid #efefef;padding-bottom:5px;padding-top:3px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-right:11px}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:18px;color:#000}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-size:14px;color:#446678}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   .data__text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;margin-right:4px!important}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#446678}.users[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]:hover{background:#f7f7f7}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;border-bottom:1px solid #efefef;position:sticky;top:0;background:#fff}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;outline:none;width:94%;margin:10px auto;background:rgba(68,188,255,.3490196078);padding:10px 30px 10px 42px;border-radius:50px;color:#686868}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon.search-icon[_ngcontent-%COMP%]{position:absolute;left:5.2%;top:19px;color:#919191}.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{width:20px!important;height:20px!important;color:#919191;cursor:pointer;position:absolute;right:7%;top:16px}.textNoFound[_ngcontent-%COMP%]{text-align:center;font-size:17px;margin-top:30px!important;color:#8a8a8a}@media (min-width: 400px){.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{right:6%}}@media (min-width: 600px){.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{right:5%}}@media (min-width: 1024px){.users[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   #clean-search[_ngcontent-%COMP%]{right:6.5%}}"]}),e})();var L=h(2933),j=h(7322),Kt=h(7531);function bt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(32),l=t.oxw();return t.KtG(l.toggleEdit(c))}),t._uU(1,"edit"),t.qZA()}}function ce(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(32),l=t.oxw();return t.KtG(l.toggleEdit(c,!0))}),t._uU(1,"close"),t.qZA()}}function Qt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(32),l=t.oxw();return t.KtG(l.save(c))}),t._uU(1,"check"),t.qZA()}}function zt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Must have at least 3 letters "),t.qZA())}function Gt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Name is required "),t.qZA())}function Ot(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(43),l=t.oxw();return t.KtG(l.toggleEdit(c))}),t._uU(1,"edit"),t.qZA()}}function $t(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(43),l=t.oxw();return t.KtG(l.toggleEdit(c,!0))}),t._uU(1,"close"),t.qZA()}}function Vt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(43),l=t.oxw();return t.KtG(l.save(c))}),t._uU(1,"check"),t.qZA()}}function st(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Must have at least 3 letters "),t.qZA())}function X(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Username is required "),t.qZA())}function Wt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Username is already in use "),t.qZA())}function it(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",32),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(55),l=t.oxw();return t.KtG(l.toggleEdit(c))}),t._uU(1,"edit"),t.qZA()}}function jt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",33),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(55),l=t.oxw();return t.KtG(l.toggleEdit(c,!0))}),t._uU(1,"close"),t.qZA()}}function ot(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"mat-icon",34),t.NdJ("click",function(){t.CHM(s),t.oxw();const c=t.MAs(55),l=t.oxw();return t.KtG(l.save(c))}),t._uU(1,"check"),t.qZA()}}function Mt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function g(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Email is already in use "),t.qZA())}function Xt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Email is required "),t.qZA())}function rt(e,r){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Please enter a valid email address "),t.qZA())}function te(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"button",35),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.toggleChangePassword())}),t._uU(1,"Change password"),t.qZA()}}function w(e,r){1&e&&(t.TgZ(0,"p",36),t._uU(1,"Password updated successfully"),t.qZA())}function ee(e,r){1&e&&t._UZ(0,"mat-spinner",47)}function at(e,r){1&e&&(t.TgZ(0,"p",48),t._uU(1,"The current password is incorrect"),t.qZA())}function J(e,r){1&e&&(t.TgZ(0,"p",48),t._uU(1,"All fields are required"),t.qZA())}function tt(e,r){1&e&&(t.TgZ(0,"p",48),t._uU(1,"The new password must have at least 8 letters"),t.qZA())}function Y(e,r){1&e&&(t.TgZ(0,"p",48),t._uU(1,"Confirm password don't match"),t.qZA())}function U(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"form",37),t.NdJ("ngSubmit",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.changePassword())}),t.TgZ(1,"div",38)(2,"p"),t._uU(3,"Change your password"),t.qZA(),t.YNc(4,ee,1,0,"mat-spinner",39),t.qZA(),t.YNc(5,at,2,0,"p",40),t.YNc(6,J,2,0,"p",40),t.YNc(7,tt,2,0,"p",40),t.YNc(8,Y,2,0,"p",40),t.TgZ(9,"mat-form-field")(10,"mat-label"),t._uU(11,"Actual password"),t.qZA(),t._UZ(12,"input",41),t.TgZ(13,"button",42),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.hide.one=!c.hide.one)}),t.TgZ(14,"mat-icon"),t._uU(15),t.qZA()()(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"New password"),t.qZA(),t._UZ(19,"input",43),t.TgZ(20,"button",42),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.hide.two=!c.hide.two)}),t.TgZ(21,"mat-icon"),t._uU(22),t.qZA()()(),t.TgZ(23,"mat-form-field")(24,"mat-label"),t._uU(25,"Confirm new password"),t.qZA(),t._UZ(26,"input",44),t.TgZ(27,"button",42),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.hide.three=!c.hide.three)}),t.TgZ(28,"mat-icon"),t._uU(29),t.qZA()()(),t.TgZ(30,"div",45)(31,"button",35),t.NdJ("click",function(){t.CHM(s);const c=t.oxw(2);return t.KtG(c.toggleChangePassword(!1))}),t._uU(32,"Cancel"),t.qZA(),t.TgZ(33,"button",46),t._uU(34,"Save"),t.qZA()()()}if(2&e){const s=t.oxw(2);t.Q6J("formGroup",s.formChangePassword),t.xp6(4),t.Q6J("ngIf",s.loadingChange),t.xp6(1),t.Q6J("ngIf",s.errChangedPassword),t.xp6(1),t.Q6J("ngIf",s.requiredChangePassword),t.xp6(1),t.Q6J("ngIf",s.minLength&&!s.requiredChangePassword),t.xp6(1),t.Q6J("ngIf",s.dontMatch&&!s.requiredChangePassword&&!s.minLength),t.xp6(4),t.Q6J("type",s.hide.one?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",s.hide),t.xp6(2),t.Oqu(s.hide.one?"visibility_off":"visibility"),t.xp6(4),t.Q6J("type",s.hide.two?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",s.hide),t.xp6(2),t.Oqu(s.hide.two?"visibility_off":"visibility"),t.xp6(4),t.Q6J("type",s.hide.three?"password":"text"),t.xp6(1),t.uIk("aria-label","Hide password")("aria-pressed",s.hide),t.xp6(2),t.Oqu(s.hide.three?"visibility_off":"visibility")}}function Pt(e,r){if(1&e){const s=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"mat-icon",3),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.closeProfile())}),t._uU(3,"arrow_back"),t.qZA(),t.TgZ(4,"p"),t._uU(5,"Profile"),t.qZA()(),t.TgZ(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"img",7),t.qZA(),t.TgZ(10,"button",8)(11,"mat-icon"),t._uU(12,"linked_camera"),t.qZA()(),t.TgZ(13,"mat-menu",9,10)(15,"button",11),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.viewPhoto(c.user.image.url))}),t.TgZ(16,"span"),t._uU(17,"View photo"),t.qZA()(),t.TgZ(18,"button",11),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(25),l=t.oxw();return t.KtG(l.uploadPhoto(c))}),t.TgZ(19,"span"),t._uU(20,"Upload photo"),t.qZA()(),t.TgZ(21,"button",11),t.NdJ("click",function(){t.CHM(s);const c=t.oxw();return t.KtG(c.removePhoto())}),t.TgZ(22,"span"),t._uU(23,"Remove photo"),t.qZA()()()(),t.TgZ(24,"input",12,13),t.NdJ("change",function(c){t.CHM(s);const l=t.oxw();return t.KtG(l.uploadPhoto(!1,c))}),t.qZA(),t.TgZ(26,"div",14)(27,"div",15)(28,"label"),t._uU(29,"Your name"),t.qZA(),t.TgZ(30,"div",16),t._UZ(31,"input",17,18),t.YNc(33,bt,2,0,"mat-icon",19),t.YNc(34,ce,2,0,"mat-icon",20),t.YNc(35,Qt,2,0,"mat-icon",21),t.qZA(),t.YNc(36,zt,2,0,"mat-error",22),t.YNc(37,Gt,2,0,"mat-error",22),t.qZA(),t.TgZ(38,"div",15)(39,"label"),t._uU(40,"Your username"),t.qZA(),t.TgZ(41,"div",16),t._UZ(42,"input",23,24),t.YNc(44,Ot,2,0,"mat-icon",19),t.YNc(45,$t,2,0,"mat-icon",20),t.YNc(46,Vt,2,0,"mat-icon",21),t.qZA(),t.YNc(47,st,2,0,"mat-error",22),t.YNc(48,X,2,0,"mat-error",22),t.YNc(49,Wt,2,0,"mat-error",22),t.qZA(),t.TgZ(50,"div",15)(51,"label"),t._uU(52,"Your email"),t.qZA(),t.TgZ(53,"div",16),t._UZ(54,"input",25,26),t.YNc(56,it,2,0,"mat-icon",19),t.YNc(57,jt,2,0,"mat-icon",20),t.YNc(58,ot,2,0,"mat-icon",21),t.qZA(),t.YNc(59,Mt,2,0,"mat-error",22),t.YNc(60,g,2,0,"mat-error",22),t.YNc(61,Xt,2,0,"mat-error",22),t.YNc(62,rt,2,0,"mat-error",22),t.qZA()(),t.TgZ(63,"div",27),t.YNc(64,te,2,0,"button",28),t.YNc(65,w,2,0,"p",29),t.YNc(66,U,35,18,"form",30),t.qZA()(),t._UZ(67,"app-mini-alert",31),t.qZA()}if(2&e){const s=t.MAs(14),a=t.MAs(32),c=t.MAs(43),l=t.MAs(55),u=t.oxw();t.xp6(9),t.Q6J("src",u.user.image.url,t.LSH)("alt",u.user.name),t.xp6(1),t.Q6J("matMenuTriggerFor",s),t.xp6(21),t.Q6J("formControl",u.name),t.xp6(2),t.Q6J("ngIf",a.disabled),t.xp6(1),t.Q6J("ngIf",!a.disabled),t.xp6(1),t.Q6J("ngIf",!a.disabled),t.xp6(1),t.Q6J("ngIf",u.name.hasError("minlength")&&u.name.touched),t.xp6(1),t.Q6J("ngIf",u.name.hasError("required")&&u.name.touched),t.xp6(5),t.Q6J("formControl",u.username),t.xp6(2),t.Q6J("ngIf",c.disabled),t.xp6(1),t.Q6J("ngIf",!c.disabled),t.xp6(1),t.Q6J("ngIf",!c.disabled),t.xp6(1),t.Q6J("ngIf",u.username.hasError("minlength")&&u.username.touched),t.xp6(1),t.Q6J("ngIf",u.username.hasError("required")&&u.username.touched),t.xp6(1),t.Q6J("ngIf",u.username.hasError("not_available")&&u.username.touched&&u.username.value!=u.user.username),t.xp6(5),t.Q6J("formControl",u.email),t.xp6(2),t.Q6J("ngIf",l.disabled),t.xp6(1),t.Q6J("ngIf",!l.disabled),t.xp6(1),t.Q6J("ngIf",!l.disabled),t.xp6(1),t.Q6J("ngIf",u.email.hasError("email")&&u.email.touched),t.xp6(1),t.Q6J("ngIf",u.email.hasError("not_available")&&u.email.touched&&u.email.value!=u.user.email),t.xp6(1),t.Q6J("ngIf",u.email.hasError("required")&&u.email.touched),t.xp6(1),t.Q6J("ngIf",u.email.hasError("not_valid")&&u.email.touched),t.xp6(2),t.Q6J("ngIf",!u.showChangePassword),t.xp6(1),t.Q6J("ngIf",u.okChangedPassword),t.xp6(1),t.Q6J("ngIf",u.showChangePassword),t.xp6(1),t.Q6J("eventOpenAlert",u.eventOpenAlert.asObservable())}}let le=(()=>{class e{constructor(s,a,c,l){this.authService=s,this.userService=a,this.formBuilder=c,this.store=l,this.eventOpenAlert=new O.x,this.disabled=!1,this.loadingChange=!1,this.okChangedPassword=!1,this.hide={one:!0,two:!0,three:!0},this.showChangePassword=!1,this.errChangedPassword=!1}ngOnInit(){this.store.select("user").subscribe(s=>this.user=s),this.update.subscribe(s=>{this.load()}),this.load()}load(){this.loadUser(),this.createChangePassword()}closeProfile(){const s=document.getElementById("div_profile");s.classList.add("animate__slideOutLeft"),setTimeout(()=>{s.style.display="none",s.classList.remove("animate__slideOutLeft")},500)}loadUser(){this.name=new p.NI({value:this.user.name,disabled:!0},[p.kI.required,p.kI.minLength(3)]),this.username=new p.NI({value:this.user.username,disabled:!0},[p.kI.required,p.kI.minLength(3)],L.R.validateUsername(this.authService)),this.email=new p.NI({value:this.user.email,disabled:!0},[p.kI.required,p.kI.email],[L.R.validateEmail(this.authService),L.R.emailIsValid(this.userService)])}toggleEdit(s,a=!1,c=!1){a?(s.value=c||this.user[s.name],this[s.name].value=c||this.user[s.name],s.disabled=!0,this[s.name].disable(),this[s.name].markAsUntouched()):(this[s.name].enable(),s.disabled=!1,s.focus())}toggleChangePassword(s=!0){this.loadingChange=!1,this.errChangedPassword=!1,this.showChangePassword=s}save(s){const a=s.name,c=this[a].value;this[a].valid&&(c!=this.user[a]?(this.toggleEdit(s,!0,c),this.userService.updateProfile(a,c).subscribe(l=>{this.saveUserUpdated(l)})):this.toggleEdit(s,!0))}saveUserUpdated(s){const c={token:this.authService.getAuth().token,user:s};this.authService.saveAuth(c)}createChangePassword(){this.formChangePassword=this.formBuilder.group({actual:["",[p.kI.required]],password:["",[p.kI.required,p.kI.minLength(8)]],password2:["",[p.kI.required]]},{validators:L.R.matchPasswords})}changePassword(){if(this.formChangePassword.valid){this.loadingChange=!0;const s=this.formChangePassword.get("actual").value,a=this.formChangePassword.get("password").value;this.authService.changePassword(s,a).subscribe(c=>{this.okChangedPassword=!0,this.loadingChange=!1,this.errChangedPassword=!1,this.cleanFormChangePassword()},c=>{this.errChangedPassword=!0,this.loadingChange=!1})}else this.formChangePassword.markAllAsTouched()}cleanFormChangePassword(){this.formChangePassword.reset(),this.formChangePassword.markAsUntouched(),this.formChangePassword.clearValidators(),this.toggleChangePassword(!1),this.hide={one:!0,two:!0,three:!0},setTimeout(()=>{this.okChangedPassword=!1},5e3)}get requiredChangePassword(){const s=this.formChangePassword.get("actual"),a=this.formChangePassword.get("password"),c=this.formChangePassword.get("password2");return s.hasError("required")&&s.touched||a.hasError("required")&&a.touched||c.hasError("required")&&c.touched}get dontMatch(){return this.formChangePassword.hasError("match_password")&&this.formChangePassword.get("password2").touched}get minLength(){const s=this.formChangePassword.get("password");return s.hasError("minlength")&&s.touched}viewPhoto(s){window.open(s)}removePhoto(){this.user.image.default&&"true"==this.user.image.default?(0,_.O1)(this.eventOpenAlert,"The default image is already"):((0,_.O1)(this.eventOpenAlert,"Removing profile picture..."),this.userService.updatePhoto(!1,!0).subscribe(s=>{(0,_.O1)(this.eventOpenAlert,"Profile picture removed successfully"),this.authService.updateAuthUser(s)}))}sendPhoto(s){const a=new FormData;a.append("file",s),this.userService.updatePhoto(a).subscribe(c=>{this.disabled=!1,(0,_.O1)(this.eventOpenAlert,"Profile picture updated successfully"),this.authService.updateAuthUser(c)})}uploadPhoto(s,a=!1){if(a){if(!this.disabled){const c=a.target.files[0];this.isImage(c)?(this.disabled=!0,(0,_.O1)(this.eventOpenAlert,"Uploading...",!1),document.getElementById("inputFile").value="",this.sendPhoto(c)):a.target.files.length>0&&(a.value="",(0,_.O1)(this.eventOpenAlert,"Only images allowed"))}}else this.disabled?(0,_.O1)(this.eventOpenAlert,"An image is already being uploaded, please wait...",!1):s.click()}isImage(s){return"image"===(null==s?void 0:s.type.split("/")[0])}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(F.e),t.Y36(Q.K),t.Y36(p.qu),t.Y36(H.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],inputs:{update:["updateProfile","update"]},decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"header"],[1,"back",3,"click"],[1,"main"],[1,"image","animate__animated","animate__zoomIn","animate__faster","animate__delay-2s"],[1,"image_modal"],[3,"src","alt"],["mat-icon-button","","aria-label","Menu to open options to image",3,"matMenuTriggerFor"],["yPosition","above"],["menu","matMenu"],["mat-menu-item","",3,"click"],["type","file","accept","image/*","id","inputFile",2,"display","none",3,"change"],["file",""],[1,"inputs","animate__animated","animate__fadeInDown"],[1,"div_input"],[1,"border"],["type","text","matInput","","autocomplete","off","name","name",3,"formControl"],["input_name",""],["class","btn-edit",3,"click",4,"ngIf"],["class","btn-close",3,"click",4,"ngIf"],["class","btn-save",3,"click",4,"ngIf"],[4,"ngIf"],["type","text","matInput","","autocomplete","off","name","username",3,"formControl"],["input_username",""],["type","email","matInput","","autocomplete","off","name","email",3,"formControl"],["input_email",""],[1,"change_password","animate__animated","animate__fadeInDown"],["mat-raised-button","",3,"click",4,"ngIf"],["class","alert ok",4,"ngIf"],["class","div_change_password",3,"formGroup","ngSubmit",4,"ngIf"],[3,"eventOpenAlert"],[1,"btn-edit",3,"click"],[1,"btn-close",3,"click"],[1,"btn-save",3,"click"],["mat-raised-button","",3,"click"],[1,"alert","ok"],[1,"div_change_password",3,"formGroup","ngSubmit"],[1,"text"],["id","spinner-change_password",4,"ngIf"],["class","alert error",4,"ngIf"],["matInput","","formControlName","actual",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password",3,"type"],["matInput","","formControlName","password2",3,"type"],[1,"btns"],["type","submit","mat-raised-button","","color","primary"],["id","spinner-change_password"],[1,"alert","error"]],template:function(s,a){1&s&&t.YNc(0,Pt,68,28,"div",0),2&s&&t.Q6J("ngIf",null==a.user?null:a.user.image)},dependencies:[y.O5,P.Hw,j.TO,j.KE,j.hX,j.R9,q.VK,q.OP,q.p6,I.lW,z.Ou,Kt.Nt,p._Y,p.Fj,p.JJ,p.JL,p.oH,p.sg,p.u,K.O],styles:["[_ngcontent-%COMP%]:root{--animate-delay: 0s}.animate__delay-2s[_ngcontent-%COMP%]{animation-delay:.2s!important}[_nghost-%COMP%]{display:none;position:absolute;top:0;z-index:100;height:100%;width:100%;background:#fff}.container[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background:#6405B3;background:#446678;background:#480481;height:110px;height:100px;display:flex;align-items:end;padding:20px 10px 18px 15px;color:#fff}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;padding:0 15px 3px 13px}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;border-radius:50px;width:30px;height:30px;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{background:#56049a}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{height:calc(100% - 120px);width:100%;overflow-y:auto;overflow-x:hidden;padding:25px 30px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8d0cf8}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{position:relative;width:210px;margin:0 auto}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:210px;height:210px;object-fit:cover;border-radius:50%;display:block;margin:0 auto 20px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.container   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img.default)[_ngcontent-%COMP%]{box-shadow:0 0 10px #ccc}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;bottom:0;right:15px;background:#40b940;color:#fff;display:flex;justify-content:center;align-items:center}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]{color:#446678;position:relative;margin-bottom:8px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{color:#324f5e;width:100%;padding:5px 52px 5px 0;background:none;border:none;outline:none;font-size:19px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(.container   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled){border-bottom:1px solid #446678}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#446678;position:absolute;right:0;top:24px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .inputs[_ngcontent-%COMP%]   .div_input[_ngcontent-%COMP%]   mat-icon.btn-close[_ngcontent-%COMP%]{right:25px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .change_password[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin:8px 0;padding:5px 20px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:10px 20px;box-shadow:0 0 4px #ccc;margin-top:20px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{font-size:16px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{display:flex;justify-content:end}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px;margin-bottom:3px}.container[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div_change_password[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:15px;margin:3px 0}.alert[_ngcontent-%COMP%]{font-size:13px;color:red;width:-moz-fit-content;width:fit-content;margin-bottom:3px}.alert.error[_ngcontent-%COMP%]{color:red}.alert.ok[_ngcontent-%COMP%]{color:#22a522}"]}),e})();function he(e,r){1&e&&(t._UZ(0,"img",31),t._uU(1," Chats "))}function ue(e,r){1&e&&(t._UZ(0,"img",32),t._uU(1," Users "))}const se=[{path:"",component:(()=>{class e{constructor(s,a,c,l,u,v){this.authService=s,this.chatService=a,this.router=c,this.socketService=l,this.store=u,this.dialog=v,this.eventOpenAlert=new O.x,this.eventUpdateChats=new O.x,this.eventUpdateProfileUser=new O.x,this.eventUpdateUsers=new O.x,this.authService.saveInStore(A.Q,!0),this.store.select("user").subscribe(T=>{this.user=T})}ngOnInit(){window.addEventListener("resize",()=>{this.appHeight()}),this.appHeight(),this.resize(this.router.url),this.subUrl=this.router.events.pipe((0,E.h)(s=>s instanceof f.m2)).subscribe(s=>{this.resize(s.url)}),this.listenMessages(),this.listenSchedules(),this.listenCalls(),this.eventUpdateChats.next(!0),this.eventUpdateProfileUser.next(!0),this.eventUpdateUsers.next(!0)}ngOnDestroy(){this.subUrl.unsubscribe(),this.subDeleteMessage.unsubscribe(),this.subReadMessages.unsubscribe(),this.subDeleteSchedule.unsubscribe(),this.subCalls.unsubscribe()}listenSchedules(){this.subDeleteSchedule=this.socketService.listen(b.N.events.SCHEDULE_DELETEMESSAGE).subscribe(s=>{null!=s&&s.send&&(0,_.O1)(this.eventOpenAlert,"A scheduled message has just been sent sent")})}appHeight(){document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)}resize(s){"chat"!==(s=s.split("/")[1])&&"message"!==s&&(document.getElementById("chats-container").style.visibility="visible")}logout(){this.authService.logout()}openProfile(){document.getElementById("div_profile").style.display="block"}openSettings(){document.getElementById("div_settings").style.display="block"}updateChats(){this.eventUpdateChats.next(!0)}eventUpdateProfile(){this.eventUpdateProfileUser.next(!0)}updateUsers(){this.eventUpdateUsers.next(!0)}updateNoRead(s){if(!s.read&&s.to==this.user._id){let a;this.store.select("chats").forEach(v=>a=v);let c=a.filter(v=>v._id!=s.chatId);const l=a.find(v=>v._id==s.chatId),u=Object.assign(Object.assign({},l),{noRead:l.noRead+1});c.push(u),this.store.dispatch(new m.vh(this.chatService.sortChats(c)))}}thereChat(s){let a;return this.store.select("chats").forEach(c=>a=c),a.find(c=>c._id==s)}listenMessages(){this.socketService.listen(b.N.events.NEW_MESSAGE).subscribe(s=>{this.thereChat(s.chatId)?(this.store.dispatch(new m.lq({myuser:this.user,message:s})),this.store.dispatch(new d.PV({chatId:s.chatId,message:s})),s.noRead||this.updateNoRead(s)):this.updateChats()}),this.subDeleteMessage=this.socketService.listen(b.N.events.MESSAGE_DELETED).subscribe(s=>{let a;this.store.dispatch(new d.$6({messageId:s._id,chatId:s.chatId})),this.store.select("messages").forEach(c=>{c.forEach(l=>{l.chatId!=s.chatId||(a=l.messages)})}),this.updateChats()}),this.subReadMessages=this.socketService.listen(b.N.events.READ_MESSAGES).subscribe(s=>{this.store.dispatch(new m.Vo({chatId:s.chatId}))})}listenCalls(){var s=this;this.subCalls=this.socketService.listen(b.N.events.CALL_INCOMING).subscribe(function(){var a=(0,x.Z)(function*(c){s.dialog.open(kt,{data:c,panelClass:"modal_incoming_call"}).afterClosed().subscribe(u=>{u.answer&&s.router.navigate(["/call",c.id])})});return function(c){return a.apply(this,arguments)}}())}}return e.\u0275fac=function(s){return new(s||e)(t.Y36(F.e),t.Y36(D.a),t.Y36(f.F0),t.Y36(lt.$),t.Y36(H.yh),t.Y36(R.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-main"]],decls:67,vars:9,consts:[[1,"container"],["id","chats-container",1,"chats-container"],[1,"header"],[1,"header__top"],[1,"me"],[3,"src","alt"],[1,"div-menu"],["mat-icon-button","","aria-label","menu",3,"matMenuTriggerFor"],[1,"icon-menu"],["xPosition","before",1,"main-menu"],["menu","matMenu"],[1,"item-menu"],["mat-menu-item","",3,"click"],[1,"mr-icon"],["mat-menu-item","",3,"matMenuTriggerFor"],[2,"margin-right","7px"],[1,"main-menu"],["menuMessages","matMenu"],["routerLink","/message/multiple",1,"item-menu"],["mat-menu-item",""],["routerLink","/message/schedule",1,"item-menu"],[1,"header__bottom"],["mat-stretch-tabs","","color","primary","backgroundColor","primary",1,"tabs"],["mat-tab-label",""],[1,"app-chats"],[3,"updateChats"],[3,"updateUsers","chatsUpdated"],["id","div_profile",1,"app-profile","animate__animated","animate__slideInLeft","animate__faster",3,"updateProfile"],["id","div_settings",1,"app-profile","animate__animated","animate__slideInLeft","animate__faster"],[1,"chat-container"],[3,"eventOpenAlert"],["src","assets/images/chat-icon.png","alt","messages icon"],["src","assets/images/users-icon.png","alt","users icon"]],template:function(s,a){if(1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"header",2)(3,"div",3)(4,"div",4),t._UZ(5,"img",5),t.TgZ(6,"p"),t._uU(7),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7)(10,"mat-icon",8),t._uU(11,"more_vert"),t.qZA()(),t.TgZ(12,"mat-menu",9,10)(14,"div",11)(15,"div",12),t.NdJ("click",function(){return a.openProfile()}),t.TgZ(16,"mat-icon",13),t._uU(17,"person_pin"),t.qZA(),t.TgZ(18,"span"),t._uU(19,"Profile"),t.qZA()()(),t.TgZ(20,"div",11)(21,"div",14)(22,"mat-icon",15),t._uU(23," message"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Messages"),t.qZA()()(),t.TgZ(26,"mat-menu",16,17)(28,"div",18)(29,"div",19)(30,"mat-icon"),t._uU(31,"people"),t.qZA(),t.TgZ(32,"span"),t._uU(33,"Send multiple"),t.qZA()()(),t.TgZ(34,"div",20)(35,"div",19)(36,"mat-icon"),t._uU(37,"access_time"),t.qZA(),t.TgZ(38,"span"),t._uU(39,"Schedule"),t.qZA()()()(),t.TgZ(40,"div",11)(41,"div",12),t.NdJ("click",function(){return a.openSettings()}),t.TgZ(42,"mat-icon",13),t._uU(43,"settings"),t.qZA(),t.TgZ(44,"span"),t._uU(45,"Settings"),t.qZA()()(),t.TgZ(46,"div",11)(47,"span",12),t.NdJ("click",function(){return a.logout()}),t.TgZ(48,"mat-icon",13),t._uU(49,"exit_to_app"),t.qZA(),t.TgZ(50,"span"),t._uU(51,"Logout"),t.qZA()()()()()(),t.TgZ(52,"div",21)(53,"mat-tab-group",22)(54,"mat-tab"),t.YNc(55,he,2,0,"ng-template",23),t.TgZ(56,"div",24),t._UZ(57,"app-chats",25),t.qZA()(),t.TgZ(58,"mat-tab"),t.YNc(59,ue,2,0,"ng-template",23),t.TgZ(60,"div",24)(61,"app-users",26),t.NdJ("chatsUpdated",function(){return a.updateChats()}),t.qZA()()()()()(),t._UZ(62,"app-profile",27)(63,"app-settings",28),t.qZA(),t.TgZ(64,"div",29),t._UZ(65,"router-outlet"),t.qZA()(),t._UZ(66,"app-mini-alert",30)),2&s){const c=t.MAs(13),l=t.MAs(27);t.xp6(5),t.Q6J("src",a.user.image.url,t.LSH)("alt",a.user.name),t.xp6(2),t.Oqu(a.user.name),t.xp6(2),t.Q6J("matMenuTriggerFor",c),t.xp6(12),t.Q6J("matMenuTriggerFor",l),t.xp6(36),t.Q6J("updateChats",a.eventUpdateChats),t.xp6(4),t.Q6J("updateUsers",a.eventUpdateUsers),t.xp6(1),t.Q6J("updateProfile",a.eventUpdateProfileUser),t.xp6(4),t.Q6J("eventOpenAlert",a.eventOpenAlert.asObservable())}},dependencies:[f.lC,f.rH,P.Hw,q.VK,q.OP,q.p6,I.lW,et.SP,et.uD,et.uX,K.O,ut,Bt,Ht,le],styles:["[_ngcontent-%COMP%]:root{--app-height: 100%}.app-profile.animate__faster[_ngcontent-%COMP%]{--animate-duration: .7s}.chats-container[_ngcontent-%COMP%]{border-right:1px solid #c3cbcf;height:100%}.chat-container[_ngcontent-%COMP%]{max-width:calc(100vw - 410px)}.header__top[_ngcontent-%COMP%]{align-items:center;background:#6405B3;color:#fff;display:grid;grid-template-columns:1fr 40px;padding:10px 20px 0}.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]{display:flex;align-items:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{cursor:default;font-size:21px;text-overflow:ellipsis;overflow:hidden}.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50px;height:40px;width:40px;object-fit:cover;margin-right:12px}.header[_ngcontent-%COMP%]   .icon-menu[_ngcontent-%COMP%]{transform:scale(1.5)}.header__bottom[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.item-menu[_ngcontent-%COMP%]{background:#fff;border-radius:50px;box-shadow:0 1px 1px #ccc;color:#fff;margin-top:10px}.item-menu[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center}.item-menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .item-menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#757575}.item-menu[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;margin:0 15px 0 5px;transform:scale(1.8)}.chats-container[_ngcontent-%COMP%]{position:relative;z-index:20;visibility:hidden}.mr-icon[_ngcontent-%COMP%]{margin-right:7px!important}.app-chats[_ngcontent-%COMP%]{max-height:100%;overflow-y:auto;height:calc(var(--app-height) - 98px)}.app-chats[_ngcontent-%COMP%]::-webkit-scrollbar{width:3px}.app-chats[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#8d0cf8}@media (min-width: 1024px){.header[_ngcontent-%COMP%]   .me[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}.container[_ngcontent-%COMP%]{display:grid;grid-template-columns:410px 1fr}.chats-container[_ngcontent-%COMP%]{display:block;visibility:visible}.app-chats[_ngcontent-%COMP%]{height:calc(100vh - 98px)}}@media (min-width: 1651px){.chats-container[_ngcontent-%COMP%]{border:1px solid #f1f1f1}}"]}),e})(),children:[{path:"",component:M},{path:"chat/:id",loadChildren:()=>Promise.all([h.e(812),h.e(772),h.e(387)]).then(h.bind(h,387)).then(e=>e.ChatModule)},{path:"call/:idPeer",loadChildren:()=>Promise.all([h.e(812),h.e(414)]).then(h.bind(h,2414)).then(e=>e.CallModule)},{path:"message",loadChildren:()=>Promise.all([h.e(772),h.e(656)]).then(h.bind(h,3656)).then(e=>e.MessageModule)}]},{path:"**",redirectTo:"/"}];let ie=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(se),f.Bz]}),e})();var o=h(793),n=h(4466);let i=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[y.ez,ie,o.q,p.UX,n.m]}),e})()},1054:(ct,Z,h)=>{h.d(Z,{p:()=>p});var y=h(5e3);let p=(()=>{class f{transform(M){return`https://www.google.com/maps?q=${M.latitud},${M.longitud}&z=17&hl=es`}}return f.\u0275fac=function(M){return new(M||f)},f.\u0275pipe=y.Yjl({name:"location",type:f,pure:!0}),f})()},5861:(ct,Z,h)=>{function y(f,t,M,x,O,E,b){try{var A=f[E](b),d=A.value}catch(m){return void M(m)}A.done?t(d):Promise.resolve(d).then(x,O)}function p(f){return function(){var t=this,M=arguments;return new Promise(function(x,O){var E=f.apply(t,M);function b(d){y(E,x,O,b,A,"next",d)}function A(d){y(E,x,O,b,A,"throw",d)}b(void 0)})}}h.d(Z,{Z:()=>p})}}]);